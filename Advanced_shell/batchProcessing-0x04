#!/bin/bash

POKEMONS=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")
API_URL="https://pokeapi.co/api/v2/pokemon"
DATA_DIR="pokemon_data"

mkdir -p $DATA_DIR

echo "Fetching Pokémon data in parallel..."

# Loop and start background jobs
for pokemon in "${POKEMONS[@]}"; do
    (
        echo "Fetching $pokemon..."
        curl -s --fail "$API_URL/$pokemon" -o "$DATA_DIR/$pokemon.json"

        if [ $? -eq 0 ]; then
            echo "$pokemon saved successfully ✅"
        else
            echo "Error fetching $pokemon ❌" >> errors.txt
        fi
    ) &   # Run in background
done

# Wait for all background jobs to finish
wait

echo "All Pokémon data fetched!"

